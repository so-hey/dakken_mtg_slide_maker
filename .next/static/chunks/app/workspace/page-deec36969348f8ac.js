(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{9240:function(e,n,t){Promise.resolve().then(t.bind(t,1628))},1628:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var l=t(7437),a=t(2265);let i=(0,a.createContext)({date:new Date,setDate:()=>{},displayText:"",setDisplayText:()=>{},isWorking:!0,setIsWorking:()=>{},isLoaded:!1,setIsLoaded:()=>{}}),s=e=>{let{children:n}=e,[t,s]=(0,a.useState)(new Date),[o,c]=(0,a.useState)(""),[r,d]=(0,a.useState)(!0),[h,u]=(0,a.useState)(!1);return(0,l.jsx)(i.Provider,{value:{date:t,setDate:s,displayText:o,setDisplayText:c,isWorking:r,setIsWorking:d,isLoaded:h,setIsLoaded:u},children:n})},o=()=>(0,a.useContext)(i);function c(e){let{text:n,handleClick:t}=e;return(0,l.jsxs)("button",{className:"btn btn-outline-success",type:"button",onClick:t,children:[n,(0,l.jsx)("span",{className:"material-symbols-outlined",children:"download"})]})}let r=e=>"".concat(e.getFullYear()).concat((e.getMonth()+1).toString().padStart(2,"0")).concat(e.getDate().toString().padStart(2,"0"));function d(){let{date:e,setIsWorking:n,isLoaded:t}=o(),a=async()=>{let n=await fetch("/api/getPDF",{method:"GET"});if(n.ok){let t=await n.blob(),l=window.URL.createObjectURL(t),a=document.createElement("a");a.href=l,a.download="".concat(r(e),".pdf"),a.click()}},i=async()=>{let n=await fetch("/api/getMd",{method:"GET"});if(n.ok){let t=await n.blob(),l=window.URL.createObjectURL(t),a=document.createElement("a");a.href=l,a.download="".concat(r(e),".md"),a.click()}};return(0,l.jsx)("div",{className:"container-fluid",children:(0,l.jsx)("div",{className:"row mt-0 justify-content-center mh-100",children:(0,l.jsxs)("div",{className:"col-10 col-lg-11 mh-100 mt-4",children:[(0,l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary col-2",onClick:()=>n(!0),children:[(0,l.jsx)("span",{className:"material-symbols-outlined",children:"arrow_back"}),(0,l.jsx)("span",{children:"戻る"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),t?(0,l.jsxs)("div",{className:"d-grid gap-2 col-8 mx-auto",children:[(0,l.jsx)(c,{text:"PDFをダウンロード",handleClick:a}),(0,l.jsx)(c,{text:"mdファイルをダウンロード",handleClick:i})]}):(0,l.jsxs)("div",{className:"d-grid gap-2 col-1 mx-auto",children:[(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"loading"})]})]})})})}function h(e){let{group:n,content:t,handleContent:a}=e;return(0,l.jsxs)("div",{className:"input-group mb-3",children:[(0,l.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",style:{width:"4vw"},children:n}),(0,l.jsx)("input",{type:"text",className:"form-control",value:t,placeholder:"なし",onChange:a,"aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"})]})}function u(){let{date:e,setDate:n}=o();return(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row mt-2",children:(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"form-group row",children:(0,l.jsx)("div",{className:"col-8",children:(0,l.jsx)("input",{type:"date",className:"form-control",id:"dateInput",onChange:e=>{n(new Date(e.target.value))}})})})})})})}function x(e){let{noticeTitle:n,handleNoticeTitle:t,noticeContent:a,handleNoticeContent:i,handleNoticeAdd:s}=e;return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"input-group mb-1",children:(0,l.jsx)("input",{type:"text",className:"form-control",id:"Title",value:n,onChange:t,placeholder:"Title"})}),(0,l.jsxs)("div",{className:"input-group mb-3",children:[(0,l.jsx)("input",{type:"text",className:"form-control",id:"Content",value:a,onChange:i,placeholder:"Content"}),(0,l.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:s,children:"追加"})]})]})})}function p(e){let{notice:n,handleNoticeDelete:t,index:a}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"input-group mb-1",children:(0,l.jsx)("input",{type:"text",className:"form-control",id:"Title",value:n[0],placeholder:"Title",disabled:!0})}),(0,l.jsxs)("div",{className:"input-group mb-3",children:[(0,l.jsx)("input",{type:"text",className:"form-control",id:"Content",value:n[1],placeholder:"Content",disabled:!0}),(0,l.jsx)("button",{type:"button",className:"btn btn-outline-danger",id:"deleteButton".concat(a),onClick:t,children:"削除"})]})]})}function m(e){let n=0;for(let t of e)t.match(/[ -~]/)?n+=3:n+=5;return n}let v=e=>"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日(").concat(j(e.getDay()),")"),j=e=>{switch(e){case 0:return"日";case 1:return"月";case 2:return"火";case 3:return"水";case 4:return"木";case 5:return"金";case 6:return"土"}};function b(){let{date:e,setDisplayText:n,setIsWorking:t,setIsLoaded:i}=o(),[s,c]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[w,N]=(0,a.useState)(""),[y,C]=(0,a.useState)(""),[T,k]=(0,a.useState)([]),S=e=>{let n=Number(e.currentTarget.id.slice(12));k(T.filter((e,t)=>t!==n))},D=async()=>{let n,l;await fetch("/api/writeMdFile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pdfText:(n=(n='---\nmarp: true\nclass: invert\ntheme: dakken_style\nauthor: dakken\npaginate: true\nmath: mathjax\n---\n\n<div class="title">DA研定例会</div>\n\n# <center>{date}</center>\n\n---\n\n# 部門報告\n\n### DS部門\n\n- {dsContent}\n\n### DE部門\n\n- {deContent}\n\n### BIZ部門\n\n- {bizContent}\n\n### CC部門\n\n- {ccContent}\n\n---\n\n# その他連絡事項\n\n{otherNotice}').replace("{date}",v(e)).replace("{dsContent}",""===s?"なし":s).replace("{deContent}",""===r?"なし":r).replace("{bizContent}",""===j?"なし":j).replace("{ccContent}",""===g?"なし":g),l="",T.map((e,n)=>{n%4==0&&0!=n&&(l+="---\n\n");let[t,a]=e;(""!=t||""!=a)&&(120>=m(t)?l+="### ".concat(t,"\n\n"):l+="#### ".concat(t,"\n\n"),l+="- ".concat(a,"\n\n"))}),""==l&&(l="### なし\n\n"),n=n.replace("{otherNotice}",l))})}).then(e=>{e.ok&&t(!1)}),await fetch("/api/convertPDF",{method:"GET"}).then(e=>{console.log(e),i(!0)})};return(0,a.useEffect)(()=>{var t;let l,a;n((t=T.concat([[w,y]]),l=(l='\n<hr>\n<div class="box">\n<div class="title">DA研定例会</div>\n<center>\n<h1>{date}</h1>\n</center>\n</div>\n<hr>\n<div class="box">\n<h1>部門報告</h1>\n<h3>DS部門</h3>\n<ul>\n<li>{dsContent}</li>\n</ul>\n<h3>DE部門</h3>\n<ul>\n<li>{deContent}</li>\n</ul>\n<h3>BIZ部門</h3>\n<ul>\n<li>{bizContent}</li>\n</ul>\n<h3>CC部門</h3>\n<ul>\n<li>{ccContent}</li>\n</ul>\n</div>\n<hr>\n<div class="box">\n<h1>その他連絡事項</h1>\n{otherNotice}\n</div>\n<hr>').replace("{date}",v(e)).replace("{dsContent}",""===s?"なし":s).replace("{deContent}",""===r?"なし":r).replace("{bizContent}",""===j?"なし":j).replace("{ccContent}",""===g?"なし":g),a="",t.map((e,n)=>{n%4==0&&0!=n&&(a+='</div><hr><div class="box"><br />');let[t,l]=e;(""!=t||""!=l)&&(120>=m(t)?a+="<h3>".concat(t,"</h3>"):a+="<h4>".concat(t,"</h4>"),a+="<ul><li>".concat(l,"</li></ul>"))}),""==a&&(a="<h3>なし</h3>"),l=l.replace("{otherNotice}",a)))},[e,s,r,j,g,w,y,T,n]),(0,a.useEffect)(()=>{i(!1)},[i]),(0,l.jsxs)("div",{style:{overflow:"hidden"},children:[(0,l.jsxs)("div",{className:"container",style:{height:"75vh",overflowY:"auto"},children:[(0,l.jsx)("h3",{className:"mt-4",children:"定例会日時"}),(0,l.jsx)(u,{}),(0,l.jsx)("hr",{}),(0,l.jsx)("h3",{children:"部門報告"}),(0,l.jsx)(h,{group:"DS",content:s,handleContent:e=>{let n=e.target.value;150>=m(n)&&(""==n?c(""):c(n))}}),(0,l.jsx)(h,{group:"DE",content:r,handleContent:e=>{let n=e.target.value;150>=m(n)&&(""==n?d(""):d(n))}}),(0,l.jsx)(h,{group:"BIZ",content:j,handleContent:e=>{let n=e.target.value;150>=m(n)&&(""==n?b(""):b(n))}}),(0,l.jsx)(h,{group:"CC",content:g,handleContent:e=>{let n=e.target.value;150>=m(n)&&(""==n?f(""):f(n))}}),(0,l.jsx)("hr",{}),(0,l.jsx)("h3",{children:"その他連絡事項"}),(0,l.jsx)(x,{noticeTitle:w,handleNoticeTitle:e=>{let n=e.target.value;150>=m(n)&&N(n)},noticeContent:y,handleNoticeContent:e=>{let n=e.target.value;150>=m(n)&&C(n)},handleNoticeAdd:()=>{""!=w&&""!=y&&(k([...T,[w,y]]),N(""),C(""),console.log(T))}}),(0,l.jsx)("div",{children:T.map((e,n)=>(0,l.jsx)("div",{children:(0,l.jsx)(p,{notice:e,handleNoticeDelete:S,index:n})},n))}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]}),(0,l.jsx)("hr",{}),(0,l.jsx)("div",{style:{height:"20vh",overflow:"hidden"},children:(0,l.jsx)("center",{children:(0,l.jsx)("button",{type:"button",className:"btn btn-lg btn-outline-primary",onClick:D,children:"確定"})})})]})}function g(){let{isWorking:e}=o();return(0,l.jsx)("div",{className:"col-sm-6 border-end mh-100",style:{overflow:"hidden"},children:e?(0,l.jsx)(b,{}):(0,l.jsx)(d,{})})}function f(){let{displayText:e}=o();return(0,l.jsx)("div",{className:"col-sm-6 mh-100",style:{overflowY:"auto"},children:(0,l.jsxs)("div",{children:[(0,l.jsx)("style",{children:"\n        .displayText .title {\n          font-size: min(3.8vw, 53.2px) !important;\n          font-weight: bold;\n          text-align: center;\n          padding-top: min(7vw, 98px);\n        }\n        .displayText h1 {\n          font-size: min(2vw, 28px) !important;\n          font-weight: bold;\n          margin-bottom: min(1.5vw, 21px);\n        }\n        .displayText h2 {\n          font-size: min(1.8vw, 25.2px) !important;\n          font-weight: bold;\n        }\n        .displayText h3 {\n          font-size: min(1.5vw, 21px) !important;\n          font-weight: bold;\n          margin: min(0.8vw, 11.2px) min(1.5vw, 21px);\n        }\n        .displayText h4 {\n          font-size: min(1.2vw, 16.8px) !important;\n          font-weight: bold;\n          margin: min(0.7vw, 9.8px) min(1.2vw, 16.8px);\n        }\n        .displayText h5 {\n          font-size: min(1vw, 14px) !important;\n          font-weight: bold;\n          margin: min(0.6vw, 8.4px) min(1vw, 14px);\n        }\n        .displayText ul {\n          margin: min(0.8vw, 11.2px);\n        }\n        .displayText li {\n          font-size: min(1.2vw, 16.8px) !important;\n        }\n        .displayText .box {\n          height: min(24vw, 336px);\n          padding: 0 min(1vw, 14px);\n        }\n      "}),(0,l.jsx)("div",{className:"displayText",dangerouslySetInnerHTML:{__html:e}}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})})}function w(){return(0,l.jsx)(s,{children:(0,l.jsx)(N,{})})}let N=()=>(0,l.jsxs)("div",{className:"row mh-100",style:{display:"flex",height:"100vh",overflow:"hidden"},children:[(0,l.jsx)(g,{}),(0,l.jsx)(f,{})]})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9240)}),_N_E=e.O()}]);